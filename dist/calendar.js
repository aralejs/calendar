define("arale/calendar/0.9.0/calendar",["$","gallery/moment/2.0.0/moment","./base-calendar","arale/position/1.0.1/position","arale/widget/1.1.0/widget","arale/base/1.1.0/base","arale/class/1.0.0/class","arale/events/1.1.0/events","./i18n/{locale}","./date-column","./base-column","./templates/date.handlebars","./month-column","./templates/month.handlebars","./year-column","./templates/year.handlebars"],function(a,b,c){a("$");var d=a("gallery/moment/2.0.0/moment"),e=a("./base-calendar"),f=a("./date-column"),g=a("./month-column"),h=a("./year-column"),i=['<div class="ui-calendar">','<div class="ui-calendar-pannel" data-role="pannel">','<span class="ui-calendar-control" data-role="prev-year">&lt;&lt;</span>','<span class="ui-calendar-control" data-role="prev-month">&lt;</span>','<span class="ui-calendar-control month" data-role="current-month"></span>','<span class="ui-calendar-control year" data-role="current-year"></span>','<span class="ui-calendar-control" data-role="next-month">&gt;</span>','<span class="ui-calendar-control" data-role="next-year">&gt;&gt;</span>',"</div>",'<div class="ui-calendar-container" data-role="container">',"</div>","</div>"].join(""),j=e.extend({attrs:{mode:"dates",template:i},events:{"click [data-role=current-month]":function(){"months"===this.get("mode")?this.renderContainer("dates"):this.renderContainer("months")},"click [data-role=current-year]":function(){"years"===this.get("mode")?this.renderContainer("dates"):this.renderContainer("years")},"click [data-role=prev-year]":function(){var a=this.years.prev();this.dates.select(a),this.months.select(a)},"click [data-role=next-year]":function(){var a=this.years.next();this.dates.select(a),this.months.select(a)},"click [data-role=prev-month]":function(){var a=this.months.prev();this.dates.select(a),this.years.select(a)},"click [data-role=next-month]":function(){var a=this.months.next();this.dates.select(a),this.years.select(a)}},setup:function(){j.superclass.setup.call(this),this.renderPannel();var a={lang:this.get("lang"),focus:this.get("focus"),range:this.get("range"),format:this.get("format"),startDay:this.get("startDay"),process:this.get("process")};this.dates=new f(a),this.months=new g(a),this.years=new h(a);var b=this;this.dates.on("select",function(a,c){b.set("focus",a);var e=b.get("focus");b.months.select(e),b.years.select(e),c&&(d.isMoment(a)&&(a=a.format(this.get("format"))),b._output(a))}),this.months.on("select",function(a,c){var d=b.get("focus");d.month(a),b.set("focus",d),b.renderPannel(),c&&b.renderContainer("dates",d)}),this.years.on("select",function(a,c){var d=b.get("focus");d.year(a),b.set("focus",d),b.renderPannel(),c&&"year"===c.data("role")&&b.renderContainer("dates",d)});var c=this.element.find("[data-role=container]");c.append(this.dates.element),c.append(this.months.element),c.append(this.years.element),this.renderContainer("dates")},renderContainer:function(a,b){return this.set("mode",a),b=b||this.get("focus"),this.dates.hide(),this.months.hide(),this.years.hide(),this.dates.select(b,null),this.months.select(b,null),this.years.select(b,null),"dates"===a?this.dates.element.show():"months"===a?this.months.element.show():"years"===a&&this.years.element.show(),this},renderPannel:function(){var a=this.get("focus"),b=this.element.find("[data-role=current-month]"),c=this.element.find("[data-role=current-year]"),d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e=d[a.month()];e=this.get("lang")[e]||e,b.text(e),c.text(a.year())},destroy:function(){this.dates.destroy(),this.months.destroy(),this.years.destroy(),j.superclass.destroy.call(this)}});c.exports=j}),define("arale/calendar/0.9.0/base-calendar",["$","arale/position/1.0.1/position","gallery/moment/2.0.0/moment","arale/widget/1.1.0/widget","arale/base/1.1.0/base","arale/class/1.0.0/class","arale/events/1.1.0/events","arale/calendar/0.9.0/i18n/{locale}"],function(a,b,c){var d=a("$"),e=a("arale/position/1.0.1/position"),f=a("gallery/moment/2.0.0/moment"),g=a("arale/widget/1.1.0/widget"),h=a("arale/calendar/0.9.0/i18n/{locale}")||{},i=g.extend({attrs:{lang:h,trigger:null,triggerType:"click",output:{value:"",getter:function(a){return a=a?a:this.get("trigger"),d(a)}},hideOnSelect:!0,focus:{value:"",getter:function(a){return a=a?a:d(this.get("trigger")).val(),a?f(a,this.get("format")):f()},setter:function(a){return a?f(a,this.get("format")):f()}},format:"YYYY-MM-DD",startDay:"Sun",range:{value:null,setter:function(a){if(d.isArray(a)){var b=this.get("format"),c=[];return d.each(a,function(a,d){d=null===d?null:f(d,b),c.push(d)}),c}return a}},process:null,align:{getter:function(a){if(a)return a;var b=d(this.get("trigger"));return b?{selfXY:[0,0],baseElement:b,baseXY:[0,b.height()+10]}:{selfXY:[0,0],baseXY:[0,0]}}}},setup:function(){i.superclass.setup.call(this);var a=this,b=this.get("trigger");if(b){var c=d(this.get("trigger"));c.on(this.get("triggerType"),function(){a.show()}),c.on("blur",function(){a.hide()}),this.element.on("mousedown",function(a){a.preventDefault()})}},show:function(){this.rendered||(this._pin(),this.render()),this._pin(),this.element.show()},hide:function(){this.element.hide()},_pin:function(a){a=a||this.get("align"),e.pin({element:this.element,x:a.selfXY[0],y:a.selfXY[1]},{element:a.baseElement,x:a.baseXY[0],y:a.baseXY[1]})},_output:function(a){var b=this.get("output");b.length&&("undefined"==typeof b[0].value?b.text(a):b.val(a),this.get("hideOnSelect")&&this.hide())}});c.exports=i}),define("arale/calendar/0.9.0/date-column",["$","gallery/moment/2.0.0/moment","arale/calendar/0.9.0/base-column","arale/widget/1.1.0/widget","arale/base/1.1.0/base","arale/class/1.0.0/class","arale/events/1.1.0/events"],function(a,b,c){function d(a){if(a=(a||0).toString().toLowerCase(),g.isNumeric(a))return a=parseInt(a,10);for(var b=0;b<l.length;b++)if(0===l[b].indexOf(a)){a=b;break}return a}function e(a){a=d(a);for(var b=[],c=a;7>c;c++)b.push({label:m[c],value:c});for(c=0;a>c;c++)b.push({label:m[c],value:c});var e={value:a,label:m[a]};return{current:e,items:b}}function f(a,b,c,e){var f,g,h,j=[];b=d(b);var k=function(a,b){var d={value:a.format("YYYY-MM-DD"),label:a.date(),day:a.day(),className:b,available:i.isInRange(a,c)};e&&(d.type="date",d=e(d)),j.push(d)},l=a.clone().date(1),m=l.clone().add("months",-1),n=l.clone().add("months",1);if(f=l.day()-b,0>f&&(f+=7),0!=f)for(h=m.daysInMonth(),p=f-1;p>=0;p--)g=m.date(h-p),k(g,"previous-month");for(h=l.daysInMonth(),p=1;h>=p;p++)g=l.date(p),k(g,"current-month");if(f=35-j.length,0!=f)for(0>f&&(f+=7),p=1;f>=p;p++)g=n.date(p),k(g,"next-month");for(var o=[],p=0;p<j.length/7;p++)o.push(j.slice(7*p,7*p+7));var q={value:a.format("YYYY-MM-DD"),label:a.date()};return{current:q,items:o}}var g=a("$"),h=a("gallery/moment/2.0.0/moment"),i=a("arale/calendar/0.9.0/base-column"),j=a("arale/calendar/0.9.0/templates/date.handlebars"),k=i.extend({attrs:{startDay:"Sun",template:j,range:{value:null,setter:function(a){if(g.isArray(a)){var b=this.get("format"),c=[];return g.each(a,function(a,d){d=null===d?null:h(d,b),c.push(d)}),c}return a}},process:null,model:{getter:function(){var a=f(this.get("focus"),this.get("startDay"),this.get("range"),this.get("process")),b=e(this.get("startDay"));return{date:a,day:b}}}},events:{"click [data-role=date]":function(a){var b=g(a.target),c=b.data("value");this.select(c,b)}},prev:function(){var a=this.get("focus").format("YYYY-MM-DD"),b=this.get("focus").add("days",-1);return this._sync(b,a)},next:function(){var a=this.get("focus").format("YYYY-MM-DD"),b=this.get("focus").add("days",1);return this._sync(b,a)},select:function(a,b){if(b&&b.hasClass("disabled-element"))return this.trigger("selectDisable",a,b),a;var c=this.get("focus").format("YYYY-MM-DD");return this.set("focus",a),this._sync(this.get("focus"),c,b)},focus:function(a){a=a||this.get("focus");var b="[data-value="+a.format("YYYY-MM-DD")+"]";this.element.find(".focused-element").removeClass("focused-element"),this.element.find(b).addClass("focused-element")},_sync:function(a,b,c){return this.set("focus",a),a.format("YYYY-MM")!==b&&this.refresh(),this.focus(a),null!==c&&this.trigger("select",a,c),a}});c.exports=k;var l=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],m=["Su","Mo","Tu","We","Th","Fr","Sa"]}),define("arale/calendar/0.9.0/base-column",["$","gallery/moment/2.0.0/moment","arale/widget/1.1.0/widget","arale/base/1.1.0/base","arale/class/1.0.0/class","arale/events/1.1.0/events"],function(a,b,c){var d=a("$"),e=a("gallery/moment/2.0.0/moment"),f=a("arale/widget/1.1.0/widget"),g=f.extend({attrs:{focus:{value:"",getter:function(a){return a?a:e()},setter:function(a){return a?e.isMoment(a)?a:e(a,this.get("format")):e()}},template:null,format:"YYYY-MM-DD",lang:{}},compileTemplate:function(){var a=this.get("template");if(!a)return"";var b=this.get("model"),c=this.get("lang")||{};return a(b,{helpers:{_:function(a){return c[a]||a}}})},parseElement:function(){this.element=d(this.compileTemplate())},show:function(){this.render(),this.focus()},hide:function(){this.element.hide()},refresh:function(){this.element.html(d(this.compileTemplate()).html())}});c.exports=g,g.isInRange=function(a,b){if(null==b)return!0;if(d.isArray(b)){var c=b[0],e=b[1],f=!0;return c&&(f=f&&a>=c),e&&(f=f&&e>=a),f}return d.isFunction(b)?b(a):!0}}),define("arale/calendar/0.9.0/templates/date.handlebars",["gallery/handlebars/1.0.2/runtime"],function(a,b,c){var d=a("gallery/handlebars/1.0.2/runtime"),e=d.template;c.exports=e(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n    <th class="ui-calendar-day ui-calendar-day-',(d=c.value)?d=d.call(a,{hash:{},data:b}):(d=a.value,d=typeof d===n?d.apply(a):d),f+=o(d)+'" data-role="day" data-value="',(d=c.value)?d=d.call(a,{hash:{},data:b}):(d=a.value,d=typeof d===n?d.apply(a):d),f+=o(d)+'">',e={hash:{},data:b},f+=o((d=c._,d?d.call(a,a.label,e):p.call(a,"_",a.label,e)))+"</th>\n    "}function g(a,b){var d,e="";return e+='\n  <tr class="ui-calendar-date-column">\n    ',d=c.each.call(a,a,{hash:{},inverse:q.noop,fn:q.program(4,h,b),data:b}),(d||0===d)&&(e+=d),e+="\n  </tr>\n  "}function h(a,b){var d,e="";return e+='\n    <td class="ui-calendar-day-',(d=c.day)?d=d.call(a,{hash:{},data:b}):(d=a.day,d=typeof d===n?d.apply(a):d),e+=o(d)+" ",(d=c.className)?d=d.call(a,{hash:{},data:b}):(d=a.className,d=typeof d===n?d.apply(a):d),e+=o(d)+" ",d=c.unless.call(a,a.available,{hash:{},inverse:q.noop,fn:q.program(5,i,b),data:b}),(d||0===d)&&(e+=d),e+='" data-role="date" data-value="',(d=c.value)?d=d.call(a,{hash:{},data:b}):(d=a.value,d=typeof d===n?d.apply(a):d),e+=o(d)+'">',(d=c.label)?d=d.call(a,{hash:{},data:b}):(d=a.label,d=typeof d===n?d.apply(a):d),e+=o(d)+"</td>\n    "}function i(){return"disabled-element"}this.compilerInfo=[3,">= 1.0.0-rc.4"],c=c||{};for(var j in a.helpers)c[j]=c[j]||a.helpers[j];e=e||{};var k,l,m="",n="function",o=this.escapeExpression,p=c.helperMissing,q=this;return m+='<table class="ui-calendar-date" data-role="date-column">\n  <tr class="ui-calendar-day-column">\n    ',l=c.each.call(b,(k=b.day,null==k||k===!1?k:k.items),{hash:{},inverse:q.noop,fn:q.program(1,f,e),data:e}),(l||0===l)&&(m+=l),m+="\n  </tr>\n  ",l=c.each.call(b,(k=b.date,null==k||k===!1?k:k.items),{hash:{},inverse:q.noop,fn:q.program(3,g,e),data:e}),(l||0===l)&&(m+=l),m+="\n</table>\n"})}),define("arale/calendar/0.9.0/month-column",["$","arale/calendar/0.9.0/base-column","gallery/moment/2.0.0/moment","arale/widget/1.1.0/widget","arale/base/1.1.0/base","arale/class/1.0.0/class","arale/events/1.1.0/events"],function(a,b,c){function d(a,b,c){var d=a.month(),f=[];for(k=0;k<j.length;k++){var g={value:k,available:e(k,b),label:j[k]};c&&(g.type="month",g=c(g)),f.push(g)}for(var h={value:d,label:j[d]},i=[],k=0;k<f.length/3;k++)i.push(f.slice(3*k,3*k+3));return{current:h,items:i}}function e(a,b){if(null==b)return!0;if(f.isArray(b)){var c=b[0];c&&c.month&&(c=c.month());var d=b[1];d&&d.month&&(d=d.month());var e=!0;return c&&(e=e&&a>=c),d&&(e=e&&d>=a),e}return!0}var f=a("$"),g=a("arale/calendar/0.9.0/base-column"),h=a("arale/calendar/0.9.0/templates/month.handlebars"),i=g.extend({attrs:{template:h,range:null,process:null,model:{getter:function(){return d(this.get("focus"),this.get("range"),this.get("process"))}}},events:{"click [data-role=month]":function(a){var b=f(a.target),c=b.data("value");this.select(c,b)}},prev:function(){var a=this.get("focus").add("months",-1);return this._sync(a)},next:function(){var a=this.get("focus").add("months",1);return this._sync(a)},select:function(a,b){if(b&&b.hasClass("disabled-element"))return this.trigger("selectDisable",a,b),a;var c;return c=a.month?a:this.get("focus").month(a),this._sync(c,b)},focus:function(a){a=a||this.get("focus");var b="[data-value="+a.month()+"]";this.element.find(".focused-element").removeClass("focused-element"),this.element.find(b).addClass("focused-element")},_sync:function(a,b){return this.set("focus",a),this.focus(a),null!==b&&this.trigger("select",a.month(),b),a}});c.exports=i;var j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),define("arale/calendar/0.9.0/templates/month.handlebars",["gallery/handlebars/1.0.2/runtime"],function(a,b,c){var d=a("gallery/handlebars/1.0.2/runtime"),e=d.template;c.exports=e(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='\n<tr class="ui-calendar-month-column">\n    ',d=c.each.call(a,a,{hash:{},inverse:l.noop,fn:l.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\n</tr>\n"}function g(a,b){var d,e,f="";return f+='\n    <td class="',d=c.unless.call(a,a.available,{hash:{},inverse:l.noop,fn:l.program(3,h,b),data:b}),(d||0===d)&&(f+=d),f+='" data-role="month" data-value="',(d=c.value)?d=d.call(a,{hash:{},data:b}):(d=a.value,d=typeof d===m?d.apply(a):d),f+=n(d)+'">',e={hash:{},data:b},f+=n((d=c._,d?d.call(a,a.label,e):o.call(a,"_",a.label,e)))+"</td>\n    "}function h(){return"disabled-element"}this.compilerInfo=[3,">= 1.0.0-rc.4"],c=c||{};for(var i in a.helpers)c[i]=c[i]||a.helpers[i];e=e||{};var j,k="",l=this,m="function",n=this.escapeExpression,o=c.helperMissing;return k+='<table class="ui-calendar-month" data-role="month-column">\n',j=c.each.call(b,b.items,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(j||0===j)&&(k+=j),k+="\n</table>\n"})}),define("arale/calendar/0.9.0/year-column",["$","arale/calendar/0.9.0/base-column","gallery/moment/2.0.0/moment","arale/widget/1.1.0/widget","arale/base/1.1.0/base","arale/class/1.0.0/class","arale/events/1.1.0/events"],function(a,b,c){function d(a,b,c){for(var d=a.year(),g=[e({value:d-10,label:". . .",available:!0,role:"previous-10-year"},c)],h=d-6;d+4>h;h++)g.push(e({value:h,label:h,available:f(h,b),role:"year"},c));g.push(e({value:d+10,label:". . .",available:!0,role:"next-10-year"},c));var i=[];for(h=0;h<g.length/3;h++)i.push(g.slice(3*h,3*h+3));var j={value:d,label:d};return{current:j,items:i}}function e(a,b){return b?(a.type="year",b(a)):a}function f(a,b){if(null==b)return!0;if(g.isArray(b)){var c=b[0];c&&c.year&&(c=c.year());var d=b[1];d&&d.year&&(d=d.year());var e=!0;return c&&(e=e&&a>=c),d&&(e=e&&d>=a),e}return!0}var g=a("$"),h=a("arale/calendar/0.9.0/base-column"),i=a("arale/calendar/0.9.0/templates/year.handlebars"),j=h.extend({attrs:{range:null,process:null,template:i,model:{getter:function(){return d(this.get("focus"),this.get("range"),this.get("process"))}}},events:{"click [data-role=year],[data-role=previous-10-year],[data-role=next-10-year]":function(a){var b=g(a.target),c=b.data("value");this.select(c,b)}},templateHelpers:{},prev:function(){var a=this.get("focus").add("years",-1);return this._sync(a)},next:function(){var a=this.get("focus").add("years",1);return this._sync(a)},select:function(a,b){if(b&&b.hasClass("disabled-element"))return this.trigger("selectDisable",a,b),a;var c;return c=a.year?a:this.get("focus").year(a),this._sync(c,b)},focus:function(a){a=a||this.get("focus");var b="[data-value="+a.year()+"]";this.element.find(".focused-element").removeClass("focused-element"),this.element.find(b).addClass("focused-element")},refresh:function(){var a=this.get("focus").year(),b=this.element.find("[data-role=year]");(a<b.first().data("value")||a>b.last().data("value"))&&this.element.html(g(this.compileTemplate()).html())},_sync:function(a,b){return this.set("focus",a),this.refresh(),this.focus(a),null!==b&&this.trigger("select",a.year(),b),a}});c.exports=j}),define("arale/calendar/0.9.0/templates/year.handlebars",["gallery/handlebars/1.0.2/runtime"],function(a,b,c){var d=a("gallery/handlebars/1.0.2/runtime"),e=d.template;c.exports=e(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='\n  <tr class="ui-calendar-year-column">\n    ',d=c.each.call(a,a,{hash:{},inverse:l.noop,fn:l.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\n  </tr>\n  "}function g(a,b){var d,e,f="";return f+="\n    <td ",d=c.unless.call(a,a.available,{hash:{},inverse:l.noop,fn:l.program(3,h,b),data:b}),(d||0===d)&&(f+=d),f+=' data-role="',(d=c.role)?d=d.call(a,{hash:{},data:b}):(d=a.role,d=typeof d===m?d.apply(a):d),f+=n(d)+'" data-value="',(d=c.value)?d=d.call(a,{hash:{},data:b}):(d=a.value,d=typeof d===m?d.apply(a):d),f+=n(d)+'">',e={hash:{},data:b},f+=n((d=c._,d?d.call(a,a.label,e):o.call(a,"_",a.label,e)))+"</td>\n    "}function h(){return'class="disabled-element"'}this.compilerInfo=[3,">= 1.0.0-rc.4"],c=c||{};for(var i in a.helpers)c[i]=c[i]||a.helpers[i];e=e||{};var j,k="",l=this,m="function",n=this.escapeExpression,o=c.helperMissing;return k+='<table class="ui-calendar-year" data-role="year-column">\n  ',j=c.each.call(b,b.items,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(j||0===j)&&(k+=j),k+="\n</table>\n"})});
